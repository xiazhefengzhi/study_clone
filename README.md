# XiaZheStudy - AI åŠ¨ç”»å­¦ä¹ å¹³å°

è®©å¤æ‚çš„çŸ¥è¯†åƒåŠ¨ç”»ä¸€æ ·ç”ŸåŠ¨ã€‚ä¸Šä¼ æ–‡æ¡£æˆ–è¾“å…¥ä¸»é¢˜ï¼ŒAI ç¬é—´ä¸ºä½ ç”Ÿæˆäº’åŠ¨å¼åŠ¨ç”»è®²è§£ã€‚

ğŸŒ **åœ¨çº¿ä½“éªŒï¼š** [https://www.xiazhestudy.com](https://www.xiazhestudy.com)

---

## é¡¹ç›®ç®€ä»‹

XiaZheStudy æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„å­¦ä¹ å¹³å°ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯å°†æ¯ç‡¥çš„æ–‡æ¡£è½¬åŒ–ä¸ºå¼•äººå…¥èƒœçš„åŠ¨ç”»è®²è§£ã€‚

**è§£å†³ä»€ä¹ˆé—®é¢˜ï¼š**
- çœ‹æ–‡æ¡£å¤ªæ¯ç‡¥ï¼Œçœ‹ä¸è¿›å»
- çŸ¥è¯†ç‚¹å¤æ‚ï¼Œéš¾ä»¥ç†è§£
- æƒ³è¦æ›´ç›´è§‚çš„å­¦ä¹ æ–¹å¼

**æ€ä¹ˆè§£å†³ï¼š**
- ä¸Šä¼ æ–‡æ¡£ï¼ˆPDF/Word/PPTï¼‰æˆ–ç›´æ¥è¾“å…¥æ–‡å­—
- AI åˆ†æå†…å®¹ï¼Œå®æ—¶ç”ŸæˆåŠ¨ç”»è„šæœ¬
- è¾“å‡ºå¯äº¤äº’çš„åŠ¨ç”»è®²è§£

---

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | Next.js 14 + Tailwind CSS + shadcn/ui |
| åç«¯ | FastAPI + SQLAlchemy |
| æ•°æ®åº“ | PostgreSQL (Supabase) |
| å­˜å‚¨ | Supabase Storage |
| è®¤è¯ | Supabase Auth (æ”¯æŒ Google OAuth) |
| AI | å¤§è¯­è¨€æ¨¡å‹ APIï¼ˆæµå¼è¾“å‡ºï¼‰ |
| éƒ¨ç½² | Vercel (å‰ç«¯) + Railway (åç«¯) |
| åŸŸå | Cloudflare |

---

## é¡¹ç›®ç»“æ„

```
study_clone/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/          # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/         # Pydantic æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/        # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ main.py          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ alembic/             # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/                # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/             # é¡µé¢ (App Router)
â”‚   â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/        # React Context
â”‚   â”‚   â”œâ”€â”€ lib/             # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ types/           # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tailwind.config.ts
â””â”€â”€ DEPLOYMENT_CONFIG.md     # éƒ¨ç½²é…ç½®æ–‡æ¡£
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·ç³»ç»Ÿ
- é‚®ç®±æ³¨å†Œ + Google OAuth ç™»å½•
- è®¢é˜…å¥—é¤ï¼šfree / basic / plus / pro
- ç§¯åˆ†ç³»ç»Ÿï¼šæ–°ç”¨æˆ·é€ 500 ç§¯åˆ†
- é‚€è¯·ç³»ç»Ÿï¼šé‚€è¯·å¥½å‹åŒæ–¹å¾—ç§¯åˆ†

### 2. æ–‡æ¡£ç®¡ç†
- æ”¯æŒ PDFã€Wordã€PPT ç­‰æ ¼å¼ä¸Šä¼ 
- è‡ªåŠ¨è§£ææ–‡æ¡£å†…å®¹
- æ–‡ä»¶å­˜å‚¨åœ¨ Supabase Storage

### 3. AI åŠ¨ç”»ç”Ÿæˆï¼ˆæ ¸å¿ƒï¼‰
- ä»æ–‡æ¡£ç”ŸæˆåŠ¨ç”»è®²è§£
- ä»æ–‡å­—ç›´æ¥ç”ŸæˆåŠ¨ç”»
- æ”¯æŒå¤šç§é£æ ¼ï¼šæ ‡å‡†ã€å¹½é»˜ã€å­¦æœ¯ã€ç§‘å¹»
- SSE æµå¼è¾“å‡ºï¼Œå®æ—¶é¢„è§ˆ

### 4. è¯¾ç¨‹å¹¿åœº
- å…¬å¼€åˆ†äº«ä¼˜è´¨åŠ¨ç”»
- æµè§ˆå‘ç°å…¶ä»–ç”¨æˆ·ä½œå“
- ç‚¹èµã€æ”¶è—ã€æ’­æ”¾ç»Ÿè®¡

### 5. å¯¼å‡ºåŠŸèƒ½
- å¯¼å‡ºä¸º MP4 è§†é¢‘
- å¯¼å‡ºä¸ºå›¾ç‰‡åºåˆ—
- å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—å¤„ç†

---

## æœ¬åœ°å¼€å‘

### åç«¯

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥å¿…è¦çš„é…ç½®

# è¿è¡Œ
uvicorn app.main:app --reload --port 8000
```

### å‰ç«¯

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.local å¡«å…¥å¿…è¦çš„é…ç½®

# è¿è¡Œ
npm run dev
```

è®¿é—® http://localhost:3000

---

## ç¯å¢ƒå˜é‡

### åç«¯ (.env)

```bash
# æ•°æ®åº“ï¼ˆä½¿ç”¨ Supabase Pooler è¿æ¥ï¼‰
DATABASE_URL=postgresql+asyncpg://postgres.xxx:password@aws-0-us-west-2.pooler.supabase.com:5432/postgres

# Supabase
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key

# CORS
CORS_ORIGINS=http://localhost:3000,https://www.xiazhestudy.com

# JWT
SECRET_KEY=your-secret-key

# AI æœåŠ¡
AI_API_KEY=your-ai-api-key
```

### å‰ç«¯ (.env.local)

```bash
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

---

## éƒ¨ç½²

### å‰ç«¯éƒ¨ç½²åˆ° Vercel

1. è¿æ¥ GitHub ä»“åº“
2. è®¾ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½²

### åç«¯éƒ¨ç½²åˆ° Railway

1. è¿æ¥ GitHub ä»“åº“
2. æ·»åŠ  PostgreSQL æ•°æ®åº“ï¼ˆæˆ–ä½¿ç”¨ Supabaseï¼‰
3. è®¾ç½®ç¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²

### åŸŸåé…ç½® (Cloudflare)

| æœåŠ¡ | åŸŸå |
|-----|------|
| å‰ç«¯ | www.xiazhestudy.com |
| åç«¯ API | api.xiazhestudy.com |

è¯¦ç»†éƒ¨ç½²é…ç½®è¯·æŸ¥çœ‹ [DEPLOYMENT_CONFIG.md](./DEPLOYMENT_CONFIG.md)

---

## API æ–‡æ¡£

åç«¯å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:8000/docs

ä¸»è¦æ¥å£ï¼š

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/v1/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| `/api/v1/documents/upload` | POST | ä¸Šä¼ æ–‡æ¡£ |
| `/api/v1/courses/` | GET/POST | è¯¾ç¨‹åˆ—è¡¨/åˆ›å»º |
| `/api/v1/ai/generate/document` | POST | ä»æ–‡æ¡£ç”ŸæˆåŠ¨ç”» (SSE) |
| `/api/v1/ai/generate/text` | POST | ä»æ–‡å­—ç”ŸæˆåŠ¨ç”» (SSE) |

---

## å¸¸è§é—®é¢˜

### Supabase è¿æ¥å¤±è´¥ (IPv6)

Supabase 2024 å¹´åé»˜è®¤ä½¿ç”¨ IPv6ï¼ŒRailway ç­‰å¹³å°å¯èƒ½ä¸æ”¯æŒã€‚

**è§£å†³æ–¹æ¡ˆï¼š** ä½¿ç”¨ Pooler è¿æ¥ä¸²è€Œéç›´è¿ã€‚

```
# âŒ ç›´è¿ï¼ˆå¯èƒ½è¿ä¸ä¸Šï¼‰
postgres://postgres:xxx@db.xxx.supabase.co:5432/postgres

# âœ… Pooler è¿æ¥ï¼ˆæ¨èï¼‰
postgres://postgres.xxx:xxx@aws-0-us-west-2.pooler.supabase.com:5432/postgres
```

### CORS è·¨åŸŸé”™è¯¯

ç¡®ä¿åç«¯ `CORS_ORIGINS` åŒ…å«å‰ç«¯åŸŸåï¼š

```bash
CORS_ORIGINS=http://localhost:3000,https://www.xiazhestudy.com
```

---

## ç›¸å…³æ•™ç¨‹

æœ¬é¡¹ç›®é…å¥— Vibe Coding æ•™ç¨‹ï¼Œä»é›¶æ•™ä½ æ­å»ºç±»ä¼¼é¡¹ç›®ï¼š

- ç¯å¢ƒé…ç½®
- éœ€æ±‚è®¾è®¡
- åç«¯å¼€å‘
- å‰ç«¯å¼€å‘
- éƒ¨ç½²ä¸Šçº¿

---

## License

MIT
